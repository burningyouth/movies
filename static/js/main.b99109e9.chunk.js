(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{87:function(e,t,a){e.exports=a(97)},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),i=a(26),l=a(14),s=a(32),m=a(66),u=a(13),d=a(20),g=a(148),h=a(133),p=a(153),v=a(135),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"QUERY_UPDATE",payload:{query:e}}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title";return{type:"SEARCH_BY_UPDATE",payload:{searchBy:e}}},b=function(e){return{type:"FETCH_MOVIES_SUCCESS",payload:{result:e}}},y=function(e){return{type:"FETCH_MOVIE_SUCCESS",payload:{result:e}}},O=function(e){return{type:"FETCH_MOVIES_FAILURE",payload:{error:e}}},j=function(e){return{type:"FETCH_MOVIE_FAILURE",payload:{error:e}}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t,a){t({type:"FETCH_MOVIES_START"});var n=a().searchInfo,r=n.query,o=n.sortBy,c=n.searchBy,i=n.sortOrder,l="&offset=".concat(9*(e-1),"&limit=",9),s=r?"https://reactjs-cdp.herokuapp.com/movies?search=".concat(r,"&sortOrder=").concat(i,"&searchBy=").concat(c,"&sortBy=").concat(o).concat(l):"https://reactjs-cdp.herokuapp.com/movies?searchBy=".concat(c,"&sortOrder=").concat(i,"&sortBy=").concat(o).concat(l);return fetch(s).then((function(e){return e.json()}),(function(e){t(O(e))})).then((function(e){t(b(e))}))}},_=a(71),B=a(154),x=a(140),T=Object(h.a)({root:{marginTop:30},textField:{width:"100%"},button:{width:"100%",marginTop:"auto"},caption:{color:"#424242",textAlign:"right"}}),w=function(e){var t=e.query,a=e.handleQuery,o=T(),c=Object(n.useState)(t),i=Object(_.a)(c,2),l=i[0],s=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),a(l)}},r.a.createElement(v.a,{container:!0,spacing:3,className:o.root,alignItems:"flex-end"},r.a.createElement(v.a,{item:!0,xs:8,sm:9},r.a.createElement(B.a,{label:"Search",value:l,className:o.textField,onChange:function(e){e.preventDefault(),s(e.target.value)}})),r.a.createElement(v.a,{item:!0,xs:4,sm:3},r.a.createElement(x.a,{type:"submit",variant:"outlined",color:"primary",className:o.button},"Search")))))},N=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.searchInfo.query}));return r.a.createElement(w,{query:t,handleQuery:function(t){return e(E(t))}})},I=a(152),C=a(141),F=Object(h.a)({root:{marginTop:20},caption:{color:"#424242"}}),k=function(e){var t=e.total,a=F(),n=a.caption,o=a.root;return r.a.createElement(I.a,{className:o},r.a.createElement(C.a,{variant:"body1",display:"block",className:n},"Found ",t," movies"))},R=a(142),D=a(143),A=a(145),M=a(144),U=a(157),V=a(146),H=Object(h.a)({actionArea:{display:"flex",flexDirection:"column",justifyContent:"flex-start"},mainContent:{width:"calc(100% - 32px)"},link:{textDecoration:"none",color:"inherit"},genres:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",height:50,paddingLeft:16,paddingRight:16},genresWrapper:{width:"100%"},chip:{marginRight:10},overview:{height:75,overflow:"hidden"},title:{height:35,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),P=function(e){var t=e.movie,a=H(),n=t.overview;n.length>150&&(n=t.overview.substr(0,150).trim()+"...");var o=Object(h.a)({media:{height:450,width:"100%",backgroundSize:"cover",backgroundImage:"url(".concat(t.poster_path,"), url(notfound.jpg)")}})().media;return r.a.createElement(v.a,{item:!0,xs:12,sm:6,md:4,id:"item_".concat(t.id)},r.a.createElement(R.a,null,r.a.createElement(i.b,{to:"/detail/".concat(t.id),className:a.link},r.a.createElement(D.a,{className:a.actionArea},r.a.createElement(M.a,{className:o,title:"Movie poster",src:"notfound.jpg"}),r.a.createElement(A.a,{className:a.mainContent},r.a.createElement(C.a,{gutterBottom:!0,variant:"h5",component:"h2",className:a.title},t.title),r.a.createElement(C.a,{gutterBottom:!0,variant:"body2",color:"textSecondary",component:"p",className:a.overview},n)),r.a.createElement("div",{className:a.genresWrapper},r.a.createElement(V.a,{light:!0}),r.a.createElement("div",{className:a.genres},t.genres.slice(0,3).map((function(e){return r.a.createElement(U.a,{size:"small",label:e,className:a.chip,key:e})})),t.genres.length>3&&r.a.createElement(U.a,{size:"small",label:"\xb7\xb7\xb7",className:a.chip,key:"\xb7\xb7\xb7"})))))))},W=Object(h.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",marginTop:30,marginBottom:30}}),L=function(e){var t=e.handleClick,a=W().root;return r.a.createElement("div",{className:a},r.a.createElement(x.a,{variant:"outlined",color:"primary",onClick:function(){return t()}},"Load more"))},q=a(147),z=Object(h.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",marginTop:30,marginBottom:30}}),Q=function(){var e=z().root;return r.a.createElement("div",{className:e},r.a.createElement(q.a,null))},Y=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.movies}));return t.isFetching?r.a.createElement(Q,null):t.total===t.data.length?r.a.createElement(r.a.Fragment,null):r.a.createElement(L,{handleClick:function(){return e(S(t.page+1))}})},$=Object(h.a)({root:{marginTop:40}}),J=function(e){var t=e.movies,a=$().root;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{container:!0,spacing:3,className:a},t.map((function(e){return r.a.createElement(P,{movie:e,key:e.id})}))),r.a.createElement(Y,null))},X=Object(h.a)((function(e){return Object(p.a)({button:{width:"100%"},searchBy:Object(d.a)({marginRight:20},e.breakpoints.down("xs"),{marginRight:0,marginBottom:20})})})),G=function(e){var t=e.searchBy,a=e.handleSearchBy,n=X();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{item:!0,xs:12,sm:4,className:n.searchBy},r.a.createElement(x.a,{variant:"title"===t?"contained":"outlined",color:"primary",className:n.button,onClick:function(){return a("title")}},"Title")),r.a.createElement(v.a,{item:!0,xs:12,sm:4},r.a.createElement(x.a,{variant:"genres"===t?"contained":"outlined",color:"primary",className:n.button,onClick:function(){return a("genres")}},"Genre")))},K=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.searchInfo.searchBy}));return r.a.createElement(G,{searchBy:t,handleSearchBy:function(t){return e(f(t))}})},Z=a(156),ee=a(158),te=a(139),ae=a(151),ne=Object(h.a)({root:{width:"100%",marginTop:20}});var re=function(e){var t=e.items,a=e.value,n=e.handleValue,o=e.label,c=ne().root,i=Object.keys(t).map((function(e){var a=t[e];return r.a.createElement(ee.a,{value:e,key:e},a)}));return r.a.createElement(te.a,{className:c},r.a.createElement(Z.a,{id:"demo-simple-select-label"},o),r.a.createElement(ae.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:a,onChange:function(e){return n(e.target.value)}},i))},oe=Object(h.a)((function(e){return Object(p.a)({sortBy:Object(d.a)({marginRight:20},e.breakpoints.down("xs"),{marginRight:0,marginBottom:20})})})),ce=function(e){var t=e.sortBy,a=e.sortOptions,n=e.sortOrder,o=e.handleSortBy,c=e.handleSortOrder,i=oe();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{item:!0,xs:12,sm:4,className:i.sortBy},r.a.createElement(re,{label:"Sort by",value:t,handleValue:function(e){return o(e)},items:a})),r.a.createElement(v.a,{item:!0,xs:12,sm:4},r.a.createElement(re,{label:"Sort order",value:n,handleValue:function(e){return c(e)},items:{desc:"Descending",asc:"Ascending"}})))},ie=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.searchInfo}));return r.a.createElement(ce,{sortBy:t.sortBy,sortOptions:t.sortOptions,handleSortBy:function(t){return e(function(e){return{type:"SORT_BY_UPDATE",payload:{sortBy:e}}}(t))},sortOrder:t.sortOrder,handleSortOrder:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"desc";return{type:"SORT_ORDER_UPDATE",payload:{sortOrder:e}}}(t))}})},le=Object(h.a)((function(e){return Object(p.a)({controls:{display:"flex",alignItems:"space-between",flexWrap:"wrap",marginTop:20},control:Object(d.a)({width:"49%"},e.breakpoints.down("xs"),{width:"100%"})})})),se=function(e){var t=e.movies,a=e.total,n=le();return r.a.createElement(g.a,{maxWidth:"lg"},r.a.createElement(N,null),r.a.createElement("div",{className:n.controls},r.a.createElement(v.a,{container:!0,spacing:0,className:n.control,alignItems:"center"},r.a.createElement(K,null)),r.a.createElement(v.a,{container:!0,spacing:0,className:n.control,alignItems:"center",justify:"flex-end"},r.a.createElement(ie,null))),r.a.createElement(k,{total:a}),r.a.createElement(J,{movies:t}))},me=Object(h.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:300}}),ue=function(e){var t=me().root;return r.a.createElement(g.a,{maxWidth:"lg",className:t},r.a.createElement(C.a,{variant:"h5",component:"h1",color:"textSecondary"},e.message,e.children))},de=a(159),ge=Object(h.a)({root:{flexDirection:"column",zIndex:10,backgroundColor:"rgba(0,0,0,0.1)"}}),he=function(e){var t=e.open,a=ge().root;return r.a.createElement(de.a,{className:a,open:t},r.a.createElement(C.a,{gutterBottom:!0,variant:"body1",component:"h3",color:"textSecondary"},"Loading..."),r.a.createElement(q.a,{color:"primary"}))},pe=function(){var e=Object(u.c)((function(e){return e}));return Object(n.useEffect)((function(){var t=e.movieDetail.data.id;if(t){var a=document.getElementById("item_".concat(t));a&&a.scrollIntoView({block:"start"})}}),[e.movieDetail.data.id]),!e.movies.data[0]&&e.movies.isFetching?r.a.createElement(he,{open:!0}):e.movies.error?r.a.createElement(ue,{message:e.movies.error}):r.a.createElement(se,{movies:e.movies.data,total:e.movies.total})},ve=Object(h.a)((function(e){return Object(p.a)({root:Object(d.a)({marginTop:40},e.breakpoints.down("xs"),{marginTop:20}),genresWrapper:{marginTop:20},chip:{marginRight:10,marginBottom:10,cursor:"pointer","&:hover":{backgroundColor:"rgb(210,210,210)"}},tagline:{fontSize:"1.2rem"},gutterBottom:{marginBottom:"0.5rem"},link:{textDecoration:"none"}})})),Ee=function(e){var t=e.movie,a=e.handleQuery,n=ve(),o=Object(h.a)((function(e){return Object(p.a)({media:Object(d.a)({height:600,backgroundOrigin:"center",backgroundSize:"cover",backgroundImage:"url(".concat(t.poster_path,"), url(notfound.jpg)")},e.breakpoints.down("xs"),{height:400})})}))().media;return r.a.createElement(g.a,{maxWidth:"lg"},r.a.createElement(v.a,{container:!0,spacing:3,className:n.root},r.a.createElement(v.a,{item:!0,xs:12,sm:7,md:5,lg:4},r.a.createElement(M.a,{className:o,title:"Movie poster",src:"notfound.jpg"})),r.a.createElement(v.a,{item:!0,xs:!0},r.a.createElement("div",{className:n.gutterBottom},r.a.createElement(C.a,{variant:"h4",component:"h1"},t.title),t.tagline&&r.a.createElement(C.a,{className:n.tagline,variant:"h6",color:"textSecondary",component:"h2"},t.tagline)),t.overview&&r.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p",className:n.gutterBottom},t.overview),r.a.createElement(C.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Released: ",t.release_date),r.a.createElement(C.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Budget:"," ",t.budget?"$".concat(t.budgetString):"Not enough information"),r.a.createElement(C.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Revenue:"," ",t.revenue?"$".concat(t.revenueString):"Not enough information"),r.a.createElement(C.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Rating:"," ",t.vote_average?"".concat(t.vote_average," / 10 (").concat(t.vote_count," votes)"):"Not enough votes"),r.a.createElement("div",{className:n.genresWrapper},Array.isArray(t.genres)&&t.genres.map((function(e){return r.a.createElement(i.b,{to:"/",onClick:function(){return a(e)},key:e,className:n.link},r.a.createElement(U.a,{label:e,className:n.chip}))}))))))},fe=function(){var e=Object(l.f)().id,t=Object(u.b)(),a=Object(u.c)((function(e){return e.movieDetail}));return Object(n.useEffect)((function(){t(function(e){return function(t,a){if(!e)return t(j("ID not specified!"));if(a().movieDetail.data.id===e)return!1;t({type:"FETCH_MOVIE_START"});var n=a().movies.data.find((function(t){return e===t.id}));if(n)return t(y(n));var r="https://reactjs-cdp.herokuapp.com/movies/".concat(e);return fetch(r).then((function(e){return e.json()}),(function(e){t(j(e))})).then((function(e){t(y(e))}))}}(+e))}),[t,e]),Object(n.useEffect)((function(){a.data.title&&!a.isFetching&&(document.title=a.data.title)}),[a.data.title,a.isFetching]),a.isFetching||!a.data.id?r.a.createElement(he,{open:!0}):a.error?r.a.createElement(ue,{message:a.error}):r.a.createElement(Ee,{movie:a.data,handleQuery:function(e){return t(f("genres")),t(E(e))}})},be=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.searchInfo}));return Object(n.useEffect)((function(){e(S())}),[e,t]),r.a.createElement(r.a.Fragment,null)},ye=a(149),Oe=a(150),je=Object(h.a)({link:{textDecoration:"none",color:"inherit"}}),Se=function(){var e=je().link;return r.a.createElement(ye.a,{position:"static"},r.a.createElement(Oe.a,null,r.a.createElement(i.b,{to:"/",className:e},r.a.createElement(C.a,{variant:"h6"},"Movie searcher"))))},_e=a(11),Be={isFetching:!1,total:0,page:0,totalPages:0,data:[],error:!1},xe={isFetching:!1,error:!1,data:{}},Te={query:"",sortBy:"release_date",sortOptions:{id:"ID",title:"Title",vote_count:"Total votes",vote_average:"Rating",release_date:"Release date",budget:"Budget",revenue:"Revenue"},sortOrder:"desc",searchBy:"title"};function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";t=Math.abs(t),t=isNaN(t)?2:t;var r=e<0?"-":"",o=parseInt(e=Math.abs(Number(e)||0).toFixed(t)).toString(),c=o.length>3?o.length%3:0;return r+(c?o.substr(0,c)+n:"")+o.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+n)+(t?a+Math.abs(+e-+o).toFixed(t).slice(2):"")}var Ne=Object(s.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIES_START":return Object(_e.a)(Object(_e.a)({},e),{},{isFetching:!0});case"FETCH_MOVIES_SUCCESS":var a=t.payload.result.data;return t.payload.result.offset>1&&(a=e.data.concat(t.payload.result.data)),Object(_e.a)(Object(_e.a)({},e),{},{isFetching:!1,total:t.payload.result.total,page:Math.ceil(a.length/9),totalPages:Math.ceil(t.payload.result.total/9),data:a});case"FETCH_MOVIES_FAILURE":return Object(_e.a)(Object(_e.a)({},e),{},{isFetching:!1,error:t.payload.error});default:return e}},searchInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUERY_UPDATE":return Object(_e.a)(Object(_e.a)({},e),{},{query:t.payload.query});case"SEARCH_BY_UPDATE":return Object(_e.a)(Object(_e.a)({},e),{},{searchBy:t.payload.searchBy});case"SORT_BY_UPDATE":return Object(_e.a)(Object(_e.a)({},e),{},{sortBy:t.payload.sortBy});case"SORT_OPTIONS_UPDATE":return Object(_e.a)(Object(_e.a)({},e),{},{sortOptions:t.payload.sortOptions});case"SORT_ORDER_UPDATE":return Object(_e.a)(Object(_e.a)({},e),{},{sortOrder:t.payload.sortOrder});default:return e}},movieDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIE_START":return Object(_e.a)(Object(_e.a)({},e),{},{isFetching:!0,error:!1});case"FETCH_MOVIE_SUCCESS":var a=Object(_e.a)({},t.payload.result);return a.id?(a.release_date=new Date(a.release_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),a.budgetString=we(a.budget),a.revenueString=we(a.revenue),Object(_e.a)(Object(_e.a)({},e),{},{isFetching:!1,data:Object(_e.a)({},a)})):Object(_e.a)(Object(_e.a)({},e),{},{isFetching:!1,error:"Movie with specified ID not found!"});case"FETCH_MOVIE_FAILURE":return Object(_e.a)(Object(_e.a)({},e),{},{isFetching:!1,error:t.payload.error});default:return e}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,Ce=Object(s.e)(Ne,Ie(Object(s.a)(m.a)));c.a.render(r.a.createElement(u.a,{store:Ce},r.a.createElement(i.a,null,r.a.createElement(l.a,null,r.a.createElement(Se,null),r.a.createElement(be,null)),r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/"},r.a.createElement(pe,null)),r.a.createElement(l.a,{path:"/detail/:id?"},r.a.createElement(fe,null)),r.a.createElement(l.a,{path:"*"},r.a.createElement(ue,{message:"Page not found!"}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[87,1,2]]]);
//# sourceMappingURL=main.b99109e9.chunk.js.map