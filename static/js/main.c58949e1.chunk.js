(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{87:function(e,t,a){e.exports=a(97)},97:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(10),c=a.n(o),i=a(26),l=a(14),s=a(32),m=a(66);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=a(13),d=a(11),g={isFetching:!1,total:0,page:0,totalPages:0,data:[],error:!1},v={isFetching:!1,error:!1,data:{}},p={query:"",limit:9,sortBy:"release_date",sortOptions:{id:"ID",title:"Title",vote_count:"Total votes",vote_average:"Rating",release_date:"Release date",budget:"Budget",revenue:"Revenue"},sortOrder:"desc",searchBy:"title"};function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";t=Math.abs(t),t=isNaN(t)?2:t;var n=e<0?"-":"",o=parseInt(e=Math.abs(Number(e)||0).toFixed(t)).toString(),c=o.length>3?o.length%3:0;return n+(c?o.substr(0,c)+r:"")+o.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+r)+(t?a+Math.abs(+e-+o).toFixed(t).slice(2):"")}var E=Object(s.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIES_START":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!0});case"FETCH_MOVIES_SUCCESS":var a=t.payload.result.data;return t.payload.result.offset>1&&(a=e.data.concat(t.payload.result.data)),Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,total:t.payload.result.total,page:Math.ceil(a.length/9),totalPages:Math.ceil(t.payload.result.total/9),data:a});case"FETCH_MOVIES_FAILURE":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,error:t.payload.error});default:return e}},searchInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUERY_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{query:t.payload.query});case"SEARCH_BY_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{searchBy:t.payload.searchBy});case"SORT_BY_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{sortBy:t.payload.sortBy});case"SORT_OPTIONS_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{sortOptions:t.payload.sortOptions});case"SORT_ORDER_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{sortOrder:t.payload.sortOrder});default:return e}},movieDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIE_START":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!0,error:!1});case"FETCH_MOVIE_SUCCESS":var a=t.payload.result;if(!a.id)return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,error:"Movie with specified ID not found!"});var r={year:"numeric",month:"long",day:"numeric"};return a.release_date=new Date(a.release_date).toLocaleDateString("en-US",r),a.budgetString=h(a.budget),a.revenueString=h(a.revenue),Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,data:Object(d.a)({},a)});case"FETCH_MOVIE_FAILURE":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,error:t.payload.error});default:return e}}}),f=a(20);function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"QUERY_UPDATE",payload:{query:e}}}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"SEARCH_BY_UPDATE",payload:{searchBy:e}}}function O(e){return{type:"FETCH_MOVIES_SUCCESS",payload:{result:e}}}function j(e){return{type:"FETCH_MOVIE_SUCCESS",payload:{result:e}}}function S(e){return{type:"FETCH_MOVIES_FAILURE",payload:{error:e}}}function _(e){return{type:"FETCH_MOVIE_FAILURE",payload:{error:e}}}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t,a){t({type:"FETCH_MOVIES_START"});var r=a().searchInfo,n=r.query,o=r.sortBy,c=r.searchBy,i=r.sortOrder,l=r.limit,s="&offset=".concat((e-1)*l,"&limit=").concat(l),m=n?"https://reactjs-cdp.herokuapp.com/movies?search=".concat(n,"&sortOrder=").concat(i,"&searchBy=").concat(c,"&sortBy=").concat(o).concat(s):"https://reactjs-cdp.herokuapp.com/movies?searchBy=".concat(c,"&sortOrder=").concat(i,"&sortBy=").concat(o).concat(s);return fetch(m).then((function(e){return e.json()}),(function(e){t(S(e))})).then((function(e){t(O(e))}))}}var T=a(71),x=a(133),w=a(135),N=a(154),I=a(140),C=Object(x.a)({root:{marginTop:30},textField:{width:"100%"},button:{width:"100%",marginTop:"auto"},caption:{color:"#424242",textAlign:"right"}});var k=function(e){var t=e.query,a=e.setQuery,o=C(),c=Object(r.useState)(t),i=Object(T.a)(c,2),l=i[0],s=i[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{action:"/search/".concat(l),noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),a(l)}},n.a.createElement(w.a,{container:!0,spacing:3,className:o.root,alignItems:"flex-end"},n.a.createElement(w.a,{item:!0,xs:8,sm:9},n.a.createElement(N.a,{label:"Search",value:l,className:o.textField,onChange:function(e){e.preventDefault(),s(e.target.value)}})),n.a.createElement(w.a,{item:!0,xs:4,sm:3},n.a.createElement(I.a,{type:"submit",variant:"outlined",color:"primary",className:o.button},"Search")))))};var F=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.searchInfo}));return n.a.createElement(k,{query:t.query,setQuery:function(t){return e(b(t))}})},R=a(152),D=a(141),A=Object(x.a)({root:{marginTop:20},caption:{color:"#424242"}});var M=function(e){var t=e.total,a=A(),r=a.caption,o=a.root;return n.a.createElement(R.a,{className:o},n.a.createElement(D.a,{variant:"body1",display:"block",className:r},"Found ",t," movies"))},U=a(148),V=a(142),H=a(143),P=a(145),W=a(144),q=a(157),L=a(146),z=Object(x.a)({actionArea:{display:"flex",flexDirection:"column",justifyContent:"flex-start"},mainContent:{width:"calc(100% - 32px)"},link:{textDecoration:"none",color:"inherit"},genres:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",height:50,paddingLeft:16,paddingRight:16},genresWrapper:{width:"100%"},chip:{marginRight:10},overview:{height:75,overflow:"hidden"},title:{height:35,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}});var Q=function(e){var t=e.movie,a=z(),r=t.overview;r.length>150&&(r=t.overview.substr(0,150).trim()+"...");var o=t.genres.slice(0,3).map((function(e){return n.a.createElement(q.a,{size:"small",label:e,className:a.chip,key:e})})),c=Object(x.a)({media:{height:450,width:"100%",backgroundSize:"cover",backgroundImage:"url(".concat(t.poster_path,"), url(notfound.jpg)")}})().media;return n.a.createElement(w.a,{item:!0,xs:12,sm:6,md:4,id:"item_".concat(t.id)},n.a.createElement(V.a,null,n.a.createElement(i.b,{to:"/detail/".concat(t.id),className:a.link},n.a.createElement(H.a,{className:a.actionArea},n.a.createElement(W.a,{className:c,title:"Movie poster",src:"notfound.jpg"}),n.a.createElement(P.a,{className:a.mainContent},n.a.createElement(D.a,{gutterBottom:!0,variant:"h5",component:"h2",className:a.title},t.title),n.a.createElement(D.a,{gutterBottom:!0,variant:"body2",color:"textSecondary",component:"p",className:a.overview},r)),n.a.createElement("div",{className:a.genresWrapper},n.a.createElement(L.a,{light:!0}),n.a.createElement("div",{className:a.genres},o,t.genres.length>3&&n.a.createElement(q.a,{size:"small",label:"\xb7\xb7\xb7",className:a.chip,key:"\xb7\xb7\xb7"})))))))},Y=Object(x.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",marginTop:30,marginBottom:30}});var $=function(e){var t=e.handleClick,a=Y().root;return n.a.createElement("div",{className:a},n.a.createElement(I.a,{variant:"outlined",color:"primary",onClick:function(){return t()}},"Load more"))},J=a(147),X=Object(x.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",marginTop:30,marginBottom:30}});var G=function(){var e=X().root;return n.a.createElement("div",{className:e},n.a.createElement(J.a,null))};var K=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.movies}));return t.isFetching?n.a.createElement(G,null):t.total===t.data.length?n.a.createElement(n.a.Fragment,null):n.a.createElement($,{handleClick:function(){return e(B(t.page+1))}})},Z=Object(x.a)({root:{marginTop:40}});var ee=function(e){var t=e.movies.map((function(e){return n.a.createElement(Q,{movie:e,key:e.id})})),a=Z().root;return n.a.createElement(n.a.Fragment,null,n.a.createElement(w.a,{container:!0,spacing:3,className:a},t),n.a.createElement(K,null))},te=a(153),ae=Object(x.a)((function(e){return Object(te.a)({button:{width:"100%"},searchBy:Object(f.a)({marginRight:20},e.breakpoints.down("xs"),{marginRight:0,marginBottom:20})})}));var re=function(e){var t=e.searchBy,a=e.setSearchBy,r=ae();return n.a.createElement(n.a.Fragment,null,n.a.createElement(w.a,{item:!0,xs:12,sm:4,className:r.searchBy},n.a.createElement(I.a,{variant:"title"===t?"contained":"outlined",color:"primary",className:r.button,onClick:function(){return a("title")}},"Title")),n.a.createElement(w.a,{item:!0,xs:12,sm:4},n.a.createElement(I.a,{variant:"genres"===t?"contained":"outlined",color:"primary",className:r.button,onClick:function(){return a("genres")}},"Genre")))};var ne=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.searchInfo}));return n.a.createElement(re,{searchBy:t.searchBy,setSearchBy:function(t){return e(y(t))}})},oe=a(156),ce=a(158),ie=a(139),le=a(151),se=Object(x.a)({root:{width:"100%",marginTop:20}});var me=function(e){var t=e.items,a=e.value,r=e.setValue,o=e.label,c=se().root,i=Object.keys(t).map((function(e){var a=t[e];return n.a.createElement(ce.a,{value:e,key:e},a)}));return n.a.createElement(ie.a,{className:c},n.a.createElement(oe.a,{id:"demo-simple-select-label"},o),n.a.createElement(le.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:a,onChange:function(e){return r(e.target.value)}},i))},ue=Object(x.a)((function(e){return Object(te.a)({sortBy:Object(f.a)({marginRight:20},e.breakpoints.down("xs"),{marginRight:0,marginBottom:20})})}));var de=function(e){var t=e.sortBy,a=e.sortOptions,r=e.setSortBy,o=e.sortOrder,c=e.setSortOrder,i=ue();return n.a.createElement(n.a.Fragment,null,n.a.createElement(w.a,{item:!0,xs:12,sm:4,className:i.sortBy},n.a.createElement(me,{label:"Sort by",value:t,setValue:function(e){return r(e)},items:a})),n.a.createElement(w.a,{item:!0,xs:12,sm:4},n.a.createElement(me,{label:"Sort order",value:o,setValue:function(e){return c(e)},items:{desc:"Descending",asc:"Ascending"}})))};var ge=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.searchInfo}));return n.a.createElement(de,{sortBy:t.sortBy,sortOptions:t.sortOptions,setSortBy:function(t){return e(function(e){return{type:"SORT_BY_UPDATE",payload:{sortBy:e}}}(t))},sortOrder:t.sortOrder,setSortOrder:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"desc";return{type:"SORT_ORDER_UPDATE",payload:{sortOrder:e}}}(t))}})},ve=Object(x.a)((function(e){return Object(te.a)({controls:{display:"flex",alignItems:"space-between",flexWrap:"wrap",marginTop:20},control:Object(f.a)({width:"49%"},e.breakpoints.down("xs"),{width:"100%"})})}));var pe=function(e){var t=e.moviesState,a=ve();return n.a.createElement(U.a,{maxWidth:"lg"},n.a.createElement(F,null),n.a.createElement("div",{className:a.controls},n.a.createElement(w.a,{container:!0,spacing:0,className:a.control,alignItems:"center"},n.a.createElement(ne,null)),n.a.createElement(w.a,{container:!0,spacing:0,className:a.control,alignItems:"center",justify:"flex-end"},n.a.createElement(ge,null))),n.a.createElement(M,{total:t.total}),n.a.createElement(ee,{movies:t.data}))},he=Object(x.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:300}});var Ee=function(e){var t=he().root;return n.a.createElement(U.a,{maxWidth:"lg",className:t},n.a.createElement(D.a,{variant:"h5",component:"h1",color:"textSecondary"},e.message,e.children))};var fe=function(){var e=Object(u.c)((function(e){return e}));return Object(r.useEffect)((function(){var t=e.movieDetail.data.id;if(t){var a=document.getElementById("item_".concat(t));a&&a.scrollIntoView({block:"start"})}}),[e.movieDetail.data.id]),document.title="Movies",e.movies.error?n.a.createElement(Ee,{message:e.movies.error}):n.a.createElement(pe,{moviesState:e.movies})},be=a(159),ye=Object(x.a)({root:{zIndex:10,backgroundColor:"transparent"}});var Oe=function(e){var t=e.open,a=ye().root;return n.a.createElement(be.a,{className:a,open:t},n.a.createElement(J.a,{color:"primary"}))},je=Object(x.a)((function(e){return Object(te.a)({root:Object(f.a)({marginTop:40},e.breakpoints.down("xs"),{marginTop:20}),genresWrapper:{marginTop:20},chip:{marginRight:10,marginBottom:10,cursor:"pointer","&:hover":{backgroundColor:"rgb(210,210,210)"}},tagline:{fontSize:"1.2rem"},gutterBottom:{marginBottom:"0.5rem"},link:{textDecoration:"none"}})}));var Se=function(e){var t,a=e.movie,r=e.setQuery,o=je(),c=Object(x.a)((function(e){return Object(te.a)({media:Object(f.a)({height:600,backgroundOrigin:"center",backgroundSize:"cover",backgroundImage:"url(".concat(a.poster_path,"), url(notfound.jpg)")},e.breakpoints.down("xs"),{height:400})})}))().media,l=a.overview&&n.a.createElement(D.a,{variant:"body2",color:"textSecondary",component:"p",className:o.gutterBottom},a.overview),s=a.tagline&&n.a.createElement(D.a,{className:o.tagline,variant:"h6",color:"textSecondary",component:"h2"},a.tagline);return Array.isArray(a.genres)&&(t=a.genres.map((function(e){return n.a.createElement(i.b,{to:"/",onClick:function(){return r(e)},key:e,className:o.link},n.a.createElement(q.a,{label:e,className:o.chip}))}))),n.a.createElement(U.a,{maxWidth:"lg"},n.a.createElement(w.a,{container:!0,spacing:3,className:o.root},n.a.createElement(w.a,{item:!0,xs:12,sm:7,md:5,lg:4},n.a.createElement(W.a,{className:c,title:"Movie poster",src:"notfound.jpg"})),n.a.createElement(w.a,{item:!0,xs:!0},n.a.createElement("div",{className:o.gutterBottom},n.a.createElement(D.a,{variant:"h4",component:"h1"},a.title),s),l,n.a.createElement(D.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Released: ",a.release_date),n.a.createElement(D.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Budget:"," ",a.budget?"$".concat(a.budgetString):"Not enough information"),n.a.createElement(D.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Revenue:"," ",a.revenue?"$".concat(a.revenueString):"Not enough information"),n.a.createElement(D.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Rating:"," ",a.vote_average?"".concat(a.vote_average," / 10 (").concat(a.vote_count," votes)"):"Not enough votes"),n.a.createElement("div",{className:o.genresWrapper},t))))};var _e=function(){var e=Object(l.f)().id,t=Object(u.b)(),a=Object(u.c)((function(e){return e.movieDetail}));return Object(r.useEffect)((function(){t(function(e){return function(t,a){if(!e)return t(_("ID not specified!"));if(a().movieDetail.data.id===+e)return!1;t({type:"FETCH_MOVIE_START"});var r=a().movies.data.find((function(t){return+e===t.id}));if(r)return t(j(r));var n="https://reactjs-cdp.herokuapp.com/movies/".concat(e);return fetch(n).then((function(e){return e.json()}),(function(e){t(_(e))})).then((function(e){t(j(e))}))}}(e))}),[t,e]),a.isFetching||!a.data.id?n.a.createElement(Oe,{open:!0}):a.error?n.a.createElement(Ee,{message:a.error}):(document.title=a.data.title,n.a.createElement(Se,{movie:a.data,setQuery:function(e){t(b(e)),t(y("genres"))}}))};var Be=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.searchInfo}));return Object(r.useEffect)((function(){e(B())}),[e,t]),n.a.createElement(n.a.Fragment,null)},Te=a(149),xe=a(150),we=Object(x.a)({link:{textDecoration:"none",color:"inherit"}});var Ne=function(){var e=we().link;return n.a.createElement(Te.a,{position:"static"},n.a.createElement(xe.a,null,n.a.createElement(i.b,{to:"/",className:e},n.a.createElement(D.a,{variant:"h6"},"Movie searcher"))))},Ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,Ce=Object(s.e)(E,Ie(Object(s.a)(m.a)));c.a.render(n.a.createElement(u.a,{store:Ce},n.a.createElement(i.a,null,n.a.createElement(l.a,null,n.a.createElement(Ne,null)),n.a.createElement(l.a,null,n.a.createElement(Be,null)),n.a.createElement(l.c,null,n.a.createElement(l.a,{exact:!0,path:"/"},n.a.createElement(fe,null)),n.a.createElement(l.a,{path:"/search/:query?"},n.a.createElement(fe,null)),n.a.createElement(l.a,{path:"/detail/:id?"},n.a.createElement(_e,null)),n.a.createElement(l.a,{path:"*"},n.a.createElement(Ee,{message:"Page not found!"}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[87,1,2]]]);
//# sourceMappingURL=main.c58949e1.chunk.js.map