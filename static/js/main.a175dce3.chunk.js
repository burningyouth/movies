(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{87:function(e,t,a){e.exports=a(97)},97:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(10),c=a.n(o),i=a(36),l=a(14),s=a(31),u=a(66);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=a(13),d=a(11),v={isFetching:!1,total:0,page:0,totalPages:0,data:[],error:!1},g={isFetching:!1,error:!1,data:{}},p={query:"",limit:9,sortBy:"release_date",sortOptions:{id:"ID",title:"Title",vote_count:"Total votes",vote_average:"Rating",release_date:"Release date",overview:"Overview",budget:"Budget",revenue:"Revenue"},sortOrder:"desc",searchBy:"title"};function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";t=Math.abs(t),t=isNaN(t)?2:t;var n=e<0?"-":"",o=parseInt(e=Math.abs(Number(e)||0).toFixed(t)).toString(),c=o.length>3?o.length%3:0;return n+(c?o.substr(0,c)+r:"")+o.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+r)+(t?a+Math.abs(+e-+o).toFixed(t).slice(2):"")}var E=Object(s.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIES_START":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!0});case"FETCH_MOVIES_SUCCESS":var a=t.payload.result.data;return t.payload.result.offset>1&&(a=e.data.concat(t.payload.result.data)),Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,total:t.payload.result.total,page:Math.ceil(a.length/9),totalPages:Math.ceil(t.payload.result.total/9),data:a});case"FETCH_MOVIES_FAILURE":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,error:t.payload.error});default:return e}},searchInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUERY_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{query:t.payload.query});case"SEARCH_BY_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{searchBy:t.payload.searchBy});case"SORT_BY_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{sortBy:t.payload.sortBy});case"SORT_OPTIONS_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{sortOptions:t.payload.sortOptions});case"SORT_ORDER_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{sortOrder:t.payload.sortOrder});default:return e}},movieDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIE_START":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!0,error:!1});case"FETCH_MOVIE_SUCCESS":var a=t.payload.result;if(!a.id)return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,error:"Movie with specified ID not found!"});var r={year:"numeric",month:"long",day:"numeric"};return a.release_date=new Date(a.release_date).toLocaleDateString("en-US",r),a.budgetString=h(a.budget),a.revenueString=h(a.revenue),Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,data:Object(d.a)({},a)});case"FETCH_MOVIE_FAILURE":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,error:t.payload.error});default:return e}}}),f=a(20);function b(e){return{type:"FETCH_MOVIES_SUCCESS",payload:{result:e}}}function O(e){return{type:"FETCH_MOVIE_SUCCESS",payload:{result:e}}}function y(e){return{type:"FETCH_MOVIES_FAILURE",payload:{error:e}}}function j(e){return{type:"FETCH_MOVIE_FAILURE",payload:{error:e}}}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t,a){t({type:"FETCH_MOVIES_START"});var r=a().searchInfo,n=r.query,o=r.sortBy,c=r.searchBy,i=r.sortOrder,l=r.limit,s="&offset=".concat((e-1)*l,"&limit=").concat(l),u=n?"https://reactjs-cdp.herokuapp.com/movies?search=".concat(n,"&sortOrder=").concat(i,"&searchBy=").concat(c,"&sortBy=").concat(o).concat(s):"https://reactjs-cdp.herokuapp.com/movies?searchBy=".concat(c,"&sortOrder=").concat(i,"&sortBy=").concat(o).concat(s);return fetch(u).then((function(e){return e.json()}),(function(e){t(y(e))})).then((function(e){t(b(e))}))}}var _=a(71),T=a(133),B=a(135),w=a(154),x=a(140),N=Object(T.a)({root:{marginTop:30},textField:{width:"100%"},button:{width:"100%",marginTop:"auto"},caption:{color:"#424242",textAlign:"right"}});var I=function(e){var t=e.query,a=e.setQuery,o=N(),c=Object(r.useState)(t),i=Object(_.a)(c,2),l=i[0],s=i[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{action:"/search/".concat(l),noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),a(l)}},n.a.createElement(B.a,{container:!0,spacing:3,className:o.root,alignItems:"flex-end"},n.a.createElement(B.a,{item:!0,xs:8,sm:9},n.a.createElement(w.a,{label:"Search",value:l,className:o.textField,onChange:function(e){e.preventDefault(),s(e.target.value)}})),n.a.createElement(B.a,{item:!0,xs:4,sm:3},n.a.createElement(x.a,{type:"submit",variant:"outlined",color:"primary",className:o.button},"Search")))))};var C=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.searchInfo}));return n.a.createElement(I,{query:t.query,setQuery:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"QUERY_UPDATE",payload:{query:e}}}(t))}})},F=a(152),R=a(141),k=Object(T.a)({root:{marginTop:20},caption:{color:"#424242"}});var D=function(e){var t=e.total,a=k(),r=a.caption,o=a.root;return n.a.createElement(F.a,{className:o},n.a.createElement(R.a,{variant:"body1",display:"block",className:r},"Found ",t," movies"))},A=a(148),M=a(142),U=a(143),V=a(145),H=a(144),P=a(157),W=a(146),q=Object(T.a)({actionArea:{display:"flex",flexDirection:"column",justifyContent:"flex-start"},mainContent:{width:"calc(100% - 32px)"},link:{textDecoration:"none",color:"inherit"},genres:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",height:50,paddingLeft:16,paddingRight:16},genresWrapper:{width:"100%"},chip:{marginRight:10},overview:{height:75,overflow:"hidden"},title:{height:35,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}});var L=function(e){var t=e.movie,a=q(),r=t.overview;r.length>150&&(r=t.overview.substr(0,150).trim()+"...");var o=t.genres.slice(0,3).map((function(e){return n.a.createElement(P.a,{size:"small",label:e,className:a.chip,key:e})})),c=Object(T.a)({media:{height:450,width:"100%",backgroundSize:"cover",backgroundImage:"url(".concat(t.poster_path,"), url(notfound.jpg)")}})().media;return n.a.createElement(B.a,{item:!0,xs:12,sm:6,md:4},n.a.createElement(M.a,null,n.a.createElement(i.b,{to:"/detail/".concat(t.id),className:a.link},n.a.createElement(U.a,{className:a.actionArea},n.a.createElement(H.a,{className:c,title:"Movie poster",src:"notfound.jpg"}),n.a.createElement(V.a,{className:a.mainContent},n.a.createElement(R.a,{gutterBottom:!0,variant:"h5",component:"h2",className:a.title},t.title),n.a.createElement(R.a,{gutterBottom:!0,variant:"body2",color:"textSecondary",component:"p",className:a.overview},r)),n.a.createElement("div",{className:a.genresWrapper},n.a.createElement(W.a,{light:!0}),n.a.createElement("div",{className:a.genres},o,t.genres.length>3&&n.a.createElement(P.a,{size:"small",label:"\xb7\xb7\xb7",className:a.chip,key:"\xb7\xb7\xb7"})))))))},Y=Object(T.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",marginTop:30,marginBottom:30}});var z=function(e){var t=e.handleClick,a=Y().root;return n.a.createElement("div",{className:a},n.a.createElement(x.a,{variant:"outlined",color:"primary",onClick:function(){return t()}},"Load more"))},Q=a(147),$=Object(T.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",marginTop:30,marginBottom:30}});var J=function(){var e=$().root;return n.a.createElement("div",{className:e},n.a.createElement(Q.a,null))};var X=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.movies}));return t.isFetching?n.a.createElement(J,null):t.total===t.data.length?n.a.createElement(n.a.Fragment,null):n.a.createElement(z,{handleClick:function(){return e(S(t.page+1))}})},G=Object(T.a)({root:{marginTop:40}});var K=function(e){var t=e.movies.map((function(e){return n.a.createElement(L,{movie:e,key:e.id})})),a=G().root;return n.a.createElement(n.a.Fragment,null,n.a.createElement(B.a,{container:!0,spacing:3,className:a},t),n.a.createElement(X,null))},Z=a(153),ee=Object(T.a)((function(e){return Object(Z.a)({button:{width:"100%"},searchBy:Object(f.a)({marginRight:20},e.breakpoints.down("xs"),{marginRight:0,marginBottom:20})})}));var te=function(e){var t=e.searchBy,a=e.setSearchBy,r=ee();return n.a.createElement(n.a.Fragment,null,n.a.createElement(B.a,{item:!0,xs:12,sm:4,className:r.searchBy},n.a.createElement(x.a,{variant:"title"===t?"contained":"outlined",color:"primary",className:r.button,onClick:function(){return a("title")}},"Title")),n.a.createElement(B.a,{item:!0,xs:12,sm:4},n.a.createElement(x.a,{variant:"genres"===t?"contained":"outlined",color:"primary",className:r.button,onClick:function(){return a("genres")}},"Genre")))};var ae=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.searchInfo}));return n.a.createElement(te,{searchBy:t.searchBy,setSearchBy:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"SEARCH_BY_UPDATE",payload:{searchBy:e}}}(t))}})},re=a(156),ne=a(158),oe=a(139),ce=a(151),ie=Object(T.a)({root:{width:"100%",marginTop:20}});var le=function(e){var t=e.items,a=e.value,r=e.setValue,o=e.label,c=ie().root,i=Object.keys(t).map((function(e){var a=t[e];return n.a.createElement(ne.a,{value:e,key:e},a)}));return n.a.createElement(oe.a,{className:c},n.a.createElement(re.a,{id:"demo-simple-select-label"},o),n.a.createElement(ce.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:a,onChange:function(e){return r(e.target.value)}},i))},se=Object(T.a)((function(e){return Object(Z.a)({sortBy:Object(f.a)({marginRight:20},e.breakpoints.down("xs"),{marginRight:0,marginBottom:20})})}));var ue=function(e){var t=e.sortBy,a=e.sortOptions,r=e.setSortBy,o=e.sortOrder,c=e.setSortOrder,i=se();return n.a.createElement(n.a.Fragment,null,n.a.createElement(B.a,{item:!0,xs:12,sm:4,className:i.sortBy},n.a.createElement(le,{label:"Sort by",value:t,setValue:function(e){return r(e)},items:a})),n.a.createElement(B.a,{item:!0,xs:12,sm:4},n.a.createElement(le,{label:"Sort order",value:o,setValue:function(e){return c(e)},items:{desc:"Descending",asc:"Ascending"}})))};var me=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.searchInfo}));return n.a.createElement(ue,{sortBy:t.sortBy,sortOptions:t.sortOptions,setSortBy:function(t){return e(function(e){return{type:"SORT_BY_UPDATE",payload:{sortBy:e}}}(t))},sortOrder:t.sortOrder,setSortOrder:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"desc";return{type:"SORT_ORDER_UPDATE",payload:{sortOrder:e}}}(t))}})},de=Object(T.a)((function(e){return Object(Z.a)({controls:{display:"flex",alignItems:"space-between",flexWrap:"wrap",marginTop:20},control:Object(f.a)({width:"49%"},e.breakpoints.down("xs"),{width:"100%"})})}));var ve=function(e){var t=e.moviesState,a=de();return n.a.createElement(A.a,{maxWidth:"lg"},n.a.createElement(C,null),n.a.createElement("div",{className:a.controls},n.a.createElement(B.a,{container:!0,spacing:0,className:a.control,alignItems:"center"},n.a.createElement(ae,null)),n.a.createElement(B.a,{container:!0,spacing:0,className:a.control,alignItems:"center",justify:"flex-end"},n.a.createElement(me,null))),n.a.createElement(D,{total:t.total}),n.a.createElement(K,{movies:t.data}))},ge=Object(T.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:300}});var pe=function(e){var t=ge().root;return n.a.createElement(A.a,{maxWidth:"lg",className:t},n.a.createElement(R.a,{variant:"h5",component:"h1",color:"textSecondary"},e.message,e.children))};var he=function(){var e=Object(m.c)((function(e){return e.movies}));return e.error?n.a.createElement(pe,{message:e.error}):n.a.createElement(ve,{moviesState:e})},Ee=a(159),fe=Object(T.a)({root:{zIndex:10,backgroundColor:"transparent"}});var be=function(e){var t=e.open,a=fe().root;return n.a.createElement(Ee.a,{className:a,open:t},n.a.createElement(Q.a,{color:"primary"}))},Oe=Object(T.a)((function(e){return Object(Z.a)({root:Object(f.a)({marginTop:40},e.breakpoints.down("xs"),{marginTop:20}),genresWrapper:{marginTop:20},chip:{marginRight:10,marginBottom:10}})}));var ye=function(e){var t,a=e.movie,r=Oe(),o=r.root,c=r.genresWrapper,i=r.chip,l=a.overview&&n.a.createElement(R.a,{gutterBottom:!0,variant:"body2",color:"textSecondary",component:"p"},a.overview);Array.isArray(a.genres)&&(t=a.genres.map((function(e){return n.a.createElement(P.a,{label:e,className:i,key:e})})));var s=Object(T.a)((function(e){return Object(Z.a)({media:Object(f.a)({height:600,backgroundOrigin:"center",backgroundSize:"cover",backgroundImage:"url(".concat(a.poster_path,"), url(notfound.jpg)")},e.breakpoints.down("xs"),{height:400})})}))().media;return n.a.createElement(A.a,{maxWidth:"lg"},n.a.createElement(B.a,{container:!0,spacing:3,className:o},n.a.createElement(B.a,{item:!0,xs:12,sm:7,md:5,lg:4},n.a.createElement(H.a,{className:s,title:"Movie poster",src:"notfound.jpg"})),n.a.createElement(B.a,{item:!0,xs:!0},n.a.createElement(R.a,{gutterBottom:!0,variant:"h4",component:"h2"},a.title),l,n.a.createElement(R.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Released: ",a.release_date),n.a.createElement(R.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Budget:"," ",a.budget?"$".concat(a.budgetString):"Not enough information"),n.a.createElement(R.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Revenue:"," ",a.revenue?"$".concat(a.revenueString):"Not enough information"),n.a.createElement(R.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Rating:"," ",a.vote_average?"".concat(a.vote_average," / 10 (").concat(a.vote_count," votes)"):"Not enough votes"),n.a.createElement("div",{className:c},t))))};var je=function(){var e=Object(l.f)().id,t=Object(m.b)(),a=Object(m.c)((function(e){return e.movieDetail}));return Object(r.useEffect)((function(){t(function(e){return function(t,a){if(t({type:"FETCH_MOVIE_START"}),!e)return t(j("ID not specified!"));var r=a().movies.data.find((function(t){return+e===t.id}));if(r)return t(O(r));var n="https://reactjs-cdp.herokuapp.com/movies/".concat(e);return fetch(n).then((function(e){return e.json()}),(function(e){t(j(e))})).then((function(e){t(O(e))}))}}(e))}),[t,e]),a.isFetching||!a.data.id?n.a.createElement(be,{open:!0}):a.error?n.a.createElement(pe,{message:a.error}):n.a.createElement(ye,{movie:a.data})};var Se=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.searchInfo}));return Object(r.useEffect)((function(){e(S())}),[e,t]),n.a.createElement(n.a.Fragment,null)},_e=a(149),Te=a(150),Be=Object(T.a)({link:{textDecoration:"none",color:"inherit"}});var we=function(){var e=Be().link;return n.a.createElement(_e.a,{position:"static"},n.a.createElement(Te.a,null,n.a.createElement(i.b,{to:"/",className:e},n.a.createElement(R.a,{variant:"h6"},"Movie searcher"))))},xe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,Ne=Object(s.e)(E,xe(Object(s.a)(u.a)));c.a.render(n.a.createElement(m.a,{store:Ne},n.a.createElement(i.a,null,n.a.createElement(l.a,null,n.a.createElement(we,null)),n.a.createElement(l.a,null,n.a.createElement(Se,null)),n.a.createElement(l.c,null,n.a.createElement(l.a,{exact:!0,path:"/"},n.a.createElement(he,null)),n.a.createElement(l.a,{path:"/search/:query?"},n.a.createElement(he,null)),n.a.createElement(l.a,{path:"/detail/:id?"},n.a.createElement(je,null)),n.a.createElement(l.a,{path:"*"},n.a.createElement(pe,{message:"Page not found!"}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[87,1,2]]]);
//# sourceMappingURL=main.a175dce3.chunk.js.map