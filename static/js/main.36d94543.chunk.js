(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{87:function(e,t,a){e.exports=a(97)},97:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(10),c=a.n(o),i=a(36),l=a(14),s=a(31),m=a(66);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=a(13),d=a(11),v={isFetching:!1,total:0,page:0,totalPages:0,movies:[],error:!1},g={isFetching:!1,error:!1,movie:{}},p={query:"",limit:9,sortBy:"release_date",sortOptions:{id:"ID",title:"Title",vote_count:"Total votes",vote_average:"Rating",release_date:"Release date",overview:"Overview",budget:"Budget"},sortOrder:"desc",searchBy:"title"};function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";t=Math.abs(t),t=isNaN(t)?2:t;var n=e<0?"-":"",o=parseInt(e=Math.abs(Number(e)||0).toFixed(t)).toString(),c=o.length>3?o.length%3:0;return n+(c?o.substr(0,c)+r:"")+o.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+r)+(t?a+Math.abs(+e-+o).toFixed(t).slice(2):"")}var E=Object(s.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIES_START":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!0});case"FETCH_MOVIES_SUCCESS":var a=t.payload.result.data;return t.payload.result.offset>1&&(a=e.movies.concat(t.payload.result.data)),Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,total:t.payload.result.total,page:Math.ceil(a.length/9),totalPages:Math.ceil(t.payload.result.total/9),movies:a});case"FETCH_MOVIES_FAILURE":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,error:t.payload.error});default:return e}},searchInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUERY_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{query:t.payload.query});case"SEARCH_BY_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{searchBy:t.payload.searchBy});case"SORT_BY_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{sortBy:t.payload.sortBy});case"SORT_OPTIONS_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{sortOptions:t.payload.sortOptions});case"SORT_ORDER_UPDATE":return Object(d.a)(Object(d.a)({},e),{},{sortOrder:t.payload.sortOrder});default:return e}},movieDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIE_START":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!0});case"FETCH_MOVIE_SUCCESS":var a=t.payload.result,r={year:"numeric",month:"long",day:"numeric"};return a.release_date=new Date(a.release_date).toLocaleDateString("en-US",r),a.budgetString=h(a.budget),Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,movie:Object(d.a)({},a)});case"FETCH_MOVIE_FAILURE":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,error:t.payload.error});default:return e}}}),b=a(20);function f(e){return{type:"FETCH_MOVIES_SUCCESS",payload:{result:e}}}function O(e){return{type:"FETCH_MOVIES_FAILURE",payload:{error:new Error(e)}}}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t,a){t({type:"FETCH_MOVIES_START"});var r=a().searchInfo,n=r.query,o=r.sortBy,c=r.searchBy,i=r.sortOrder,l=r.limit,s="&offset=".concat((e-1)*l,"&limit=").concat(l),m=n?"https://reactjs-cdp.herokuapp.com/movies?search=".concat(n,"&sortOrder=").concat(i,"&searchBy=").concat(c,"&sortBy=").concat(o).concat(s):"https://reactjs-cdp.herokuapp.com/movies?searchBy=".concat(c,"&sortOrder=").concat(i,"&sortBy=").concat(o).concat(s);return fetch(m).then((function(e){return e.json()}),(function(e){t(O(e))})).then((function(e){t(f(e))}))}}function j(e){return function(t){t({type:"FETCH_MOVIE_START"});var a="https://reactjs-cdp.herokuapp.com/movies/".concat(e);return fetch(a).then((function(e){return e.json()}),(function(e){t(function(e){return{type:"FETCH_MOVIE_FAILURE",payload:{error:new Error(e)}}}(e))})).then((function(e){t({type:"FETCH_MOVIE_SUCCESS",payload:{result:e}})}))}}var S=a(71),_=a(133),T=a(135),w=a(153),B=a(140),x=Object(_.a)({root:{marginTop:30},textField:{width:"100%"},button:{width:"100%",marginTop:"auto"},caption:{color:"#424242",textAlign:"right"}});var N=function(e){var t=e.query,a=e.setQuery,o=x(),c=Object(r.useState)(t),i=Object(S.a)(c,2),l=i[0],s=i[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{action:"/search/".concat(l),noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),a(l)}},n.a.createElement(T.a,{container:!0,spacing:3,className:o.root,alignItems:"flex-end"},n.a.createElement(T.a,{item:!0,xs:8,sm:9},n.a.createElement(w.a,{label:"Search",value:l,className:o.textField,onChange:function(e){e.preventDefault(),s(e.target.value)}})),n.a.createElement(T.a,{item:!0,xs:4,sm:3},n.a.createElement(B.a,{type:"submit",variant:"outlined",color:"primary",className:o.button},"Search")))))};var I=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.searchInfo}));return n.a.createElement(N,{query:t.query,setQuery:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"QUERY_UPDATE",payload:{query:e}}}(t))}})},C=a(152),F=a(141),k=Object(_.a)({root:{marginTop:20},caption:{color:"#424242"}});var R=function(e){var t=e.total,a=k(),r=a.caption,o=a.root;return n.a.createElement(C.a,{className:o},n.a.createElement(F.a,{variant:"body1",display:"block",className:r},"Found ",t," movies"))},A=a(148),D=a(142),M=a(143),U=a(145),V=a(144),H=a(156),P=a(146),W=Object(_.a)({actionArea:{display:"flex",flexDirection:"column",justifyContent:"flex-start"},mainContent:{width:"calc(100% - 32px)"},link:{textDecoration:"none",color:"inherit"},genres:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",height:50,paddingLeft:16,paddingRight:16},genresWrapper:{width:"100%"},chip:{marginRight:10},overview:{height:75,overflow:"hidden"},title:{height:35,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}});var q=function(e){var t=e.movie,a=W();t.overview.length>150&&(t.overview=t.overview.substr(0,150).trim()+"...");var r=t.genres.slice(0,3).map((function(e){return n.a.createElement(H.a,{size:"small",label:e,className:a.chip,key:e})})),o=Object(_.a)({media:{height:450,width:"100%",backgroundSize:"cover",backgroundImage:"url(".concat(t.poster_path,"), url(notfound.jpg)")}})().media;return n.a.createElement(T.a,{item:!0,xs:12,sm:6,md:4},n.a.createElement(D.a,null,n.a.createElement(i.b,{to:"/detail/".concat(t.id),className:a.link},n.a.createElement(M.a,{className:a.actionArea},n.a.createElement(V.a,{className:o,title:"Movie poster",src:"notfound.jpg"}),n.a.createElement(U.a,{className:a.mainContent},n.a.createElement(F.a,{gutterBottom:!0,variant:"h5",component:"h2",className:a.title},t.title),n.a.createElement(F.a,{gutterBottom:!0,variant:"body2",color:"textSecondary",component:"p",className:a.overview},t.overview)),n.a.createElement("div",{className:a.genresWrapper},n.a.createElement(P.a,{light:!0}),n.a.createElement("div",{className:a.genres},r,t.genres.length>3&&n.a.createElement(H.a,{size:"small",label:"\xb7\xb7\xb7",className:a.chip,key:"\xb7\xb7\xb7"})))))))},L=Object(_.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",marginTop:30,marginBottom:30}});var Y=function(e){var t=e.handleClick,a=L().root;return n.a.createElement("div",{className:a},n.a.createElement(B.a,{variant:"outlined",color:"primary",onClick:function(){return t()}},"Load more"))},z=a(147),Q=Object(_.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",marginTop:30,marginBottom:30}});var $=function(){var e=Q().root;return n.a.createElement("div",{className:e},n.a.createElement(z.a,null))};var J=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.movies}));return t.isFetching?n.a.createElement($,null):t.total===t.movies.length?n.a.createElement(n.a.Fragment,null):n.a.createElement(Y,{handleClick:function(){return e(y(t.page+1))}})},X=Object(_.a)({root:{marginTop:40}});var G=function(e){var t=e.movies.map((function(e){return n.a.createElement(q,{movie:e,key:e.id})})),a=X().root;return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{container:!0,spacing:3,className:a},t),n.a.createElement(J,null))},K=a(157),Z=Object(_.a)((function(e){return Object(K.a)({button:{width:"100%"},searchBy:Object(b.a)({marginRight:20},e.breakpoints.down("xs"),{marginRight:0,marginBottom:20})})}));var ee=function(e){var t=e.searchBy,a=e.setSearchBy,r=Z();return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{item:!0,xs:12,sm:4,className:r.searchBy},n.a.createElement(B.a,{variant:"title"===t?"contained":"outlined",color:"primary",className:r.button,onClick:function(){return a("title")}},"Title")),n.a.createElement(T.a,{item:!0,xs:12,sm:4},n.a.createElement(B.a,{variant:"genres"===t?"contained":"outlined",color:"primary",className:r.button,onClick:function(){return a("genres")}},"Genre")))};var te=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.searchInfo}));return n.a.createElement(ee,{searchBy:t.searchBy,setSearchBy:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"SEARCH_BY_UPDATE",payload:{searchBy:e}}}(t))}})},ae=a(155),re=a(158),ne=a(139),oe=a(151),ce=Object(_.a)({root:{width:"100%",marginTop:20}});var ie=function(e){var t=e.items,a=e.value,r=e.setValue,o=e.label,c=ce().root,i=Object.keys(t).map((function(e){var a=t[e];return n.a.createElement(re.a,{value:e,key:e},a)}));return n.a.createElement(ne.a,{className:c},n.a.createElement(ae.a,{id:"demo-simple-select-label"},o),n.a.createElement(oe.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:a,onChange:function(e){return r(e.target.value)}},i))},le=Object(_.a)((function(e){return Object(K.a)({sortBy:Object(b.a)({marginRight:20},e.breakpoints.down("xs"),{marginRight:0,marginBottom:20})})}));var se=function(e){var t=e.sortBy,a=e.sortOptions,r=e.setSortBy,o=e.sortOrder,c=e.setSortOrder,i=le();return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{item:!0,xs:12,sm:4,className:i.sortBy},n.a.createElement(ie,{label:"Sort by",value:t,setValue:function(e){return r(e)},items:a})),n.a.createElement(T.a,{item:!0,xs:12,sm:4},n.a.createElement(ie,{label:"Sort order",value:o,setValue:function(e){return c(e)},items:{desc:"Descending",asc:"Ascending"}})))};var me=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.searchInfo}));return n.a.createElement(se,{sortBy:t.sortBy,sortOptions:t.sortOptions,setSortBy:function(t){return e(function(e){return{type:"SORT_BY_UPDATE",payload:{sortBy:e}}}(t))},sortOrder:t.sortOrder,setSortOrder:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"desc";return{type:"SORT_ORDER_UPDATE",payload:{sortOrder:e}}}(t))}})},ue=Object(_.a)((function(e){return Object(K.a)({controls:{display:"flex",alignItems:"space-between",flexWrap:"wrap",marginTop:20},control:Object(b.a)({width:"49%"},e.breakpoints.down("xs"),{width:"100%"})})}));var de=function(e){var t=e.moviesState,a=ue();return n.a.createElement(A.a,{maxWidth:"lg"},n.a.createElement(I,null),n.a.createElement("div",{className:a.controls},n.a.createElement(T.a,{container:!0,spacing:0,className:a.control,alignItems:"center"},n.a.createElement(te,null)),n.a.createElement(T.a,{container:!0,spacing:0,className:a.control,alignItems:"center",justify:"flex-end"},n.a.createElement(me,null))),n.a.createElement(R,{total:t.total}),n.a.createElement(G,{movies:t.movies}))},ve=Object(_.a)({root:{marginTop:40}});var ge=function(e){var t=e.message,a=ve().root;return n.a.createElement(A.a,{maxWidth:"lg",className:a},n.a.createElement(F.a,{variant:"h5",component:"h1",color:"textSecondary"},"Error: ",t))};var pe=function(){var e=Object(u.c)((function(e){return e.movies}));return e.error?n.a.createElement(ge,{message:e.error}):n.a.createElement(de,{moviesState:e})},he=a(159),Ee=Object(_.a)({root:{zIndex:10,backgroundColor:"transparent"}});var be=function(e){var t=e.open,a=Ee().root;return n.a.createElement(he.a,{className:a,open:t},n.a.createElement(z.a,{color:"primary"}))},fe=Object(_.a)((function(e){return Object(K.a)({root:Object(b.a)({marginTop:40},e.breakpoints.down("xs"),{marginTop:20}),genresWrapper:{marginTop:20},chip:{marginRight:10,marginBottom:10}})}));var Oe=function(e){var t,a=e.movie,r=fe(),o=r.root,c=r.genresWrapper,i=r.chip,l=a.overview&&n.a.createElement(F.a,{gutterBottom:!0,variant:"body2",color:"textSecondary",component:"p"},a.overview);Array.isArray(a.genres)&&(t=a.genres.map((function(e){return n.a.createElement(H.a,{label:e,className:i,key:e})})));var s=Object(_.a)((function(e){return Object(K.a)({media:Object(b.a)({height:600,backgroundOrigin:"center",backgroundSize:"cover",backgroundImage:"url(".concat(a.poster_path,"), url(notfound.jpg)")},e.breakpoints.down("xs"),{height:400})})}))().media;return n.a.createElement(A.a,{maxWidth:"lg"},n.a.createElement(T.a,{container:!0,spacing:3,className:o},n.a.createElement(T.a,{item:!0,xs:12,sm:7,md:5,lg:4},n.a.createElement(V.a,{className:s,title:"Movie poster",src:"notfound.jpg"})),n.a.createElement(T.a,{item:!0,xs:!0},n.a.createElement(F.a,{gutterBottom:!0,variant:"h4",component:"h2"},a.title),l,n.a.createElement(F.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Released: ",a.release_date),n.a.createElement(F.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Budget:"," ",a.budget?"$".concat(a.budgetString):"Not enough information"),n.a.createElement(F.a,{gutterBottom:!0,variant:"body2",component:"h4",color:"textSecondary"},"Rating:"," ",a.vote_average?"".concat(a.vote_average," / 10 (").concat(a.vote_count," votes)"):"Not enough votes"),n.a.createElement("div",{className:c},t))))};var ye=function(){var e=Object(l.f)().id,t=Object(u.b)(),a=Object(u.c)((function(e){return e.movieDetail}));return Object(r.useEffect)((function(){t(j(e))}),[t,e]),e?a.isFetching?n.a.createElement(be,{open:!0}):a.error?n.a.createElement(ge,{message:a.error}):a.movie.id?n.a.createElement(Oe,{movie:a.movie}):n.a.createElement(ge,{message:"ID is invalid!"}):n.a.createElement(ge,{message:"Type id of the movie!"})};var je=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.searchInfo}));return Object(r.useEffect)((function(){e(y())}),[e,t]),n.a.createElement(n.a.Fragment,null)},Se=a(149),_e=a(150),Te=Object(_.a)({link:{textDecoration:"none",color:"inherit"}});var we=function(){var e=Te().link;return n.a.createElement(Se.a,{position:"static"},n.a.createElement(_e.a,null,n.a.createElement(i.b,{to:"/",className:e},n.a.createElement(F.a,{variant:"h6"},"Movie searcher"))))},Be=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,xe=Object(s.e)(E,Be(Object(s.a)(m.a)));c.a.render(n.a.createElement(u.a,{store:xe},n.a.createElement(je,null),n.a.createElement(i.a,null,n.a.createElement(l.a,{component:we}),n.a.createElement(l.c,null,n.a.createElement(l.a,{exact:!0,path:"/",component:pe}),n.a.createElement(l.a,{path:"/search/:query?",component:pe}),n.a.createElement(l.a,{path:"/detail/:id?",component:ye})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[87,1,2]]]);
//# sourceMappingURL=main.36d94543.chunk.js.map